@model Lighthouse.Web.Models.CreateRule

@{
    ViewBag.Title = "Create Rule";
}

@section head{
    @Styles.Render("~/Content/qbuilder")
}
<h2>@ViewBag.Title</h2>
<div class="row">
    <div class="col-md-12 col-lg-10 col-lg-offset-1">

        <div id="builder"></div>

        <div class="btn-group">
            <button class="btn btn-warning reset">Reset</button>
            <!--<button class="btn btn-default" disabled>Generate:</button>-->
            <button class="btn btn-primary parse-sql" data-stmt="false"> Generate Rule</button>
            <!--
            <button class="btn btn-primary parse-json">JSON</button>
            <button class="btn btn-primary parse-sql" data-stmt="false">SQL</button>
            <button class="btn btn-primary parse-sql" data-stmt="question_mark">SQL statement</button>
            <button class="btn btn-primary parse-mongo">MongoDB</button>
            -->
        </div>

        <div id="result" class="hide">
            <h3>Output</h3>
            <pre></pre>
            <div>
                @using (Html.BeginForm("Create", "Rule", FormMethod.Post))
                {
                    <input type="hidden" name="Query" id="RuleValue" />

                    <div class="form-group">
                        @Html.LabelFor(m => m.Name, new {@class = "col-md-2 control-label"})
                        <div class="col-md-10">
                            @Html.TextBoxFor(m => m.Name, new {@class = "form-control"})
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(m => m.Description, new {@class = "col-md-2 control-label"})
                        <div class="col-md-10">
                            @Html.TextBoxFor(m => m.Description, new {@class = "form-control"})
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(m => m.Panel, new { @class = "col-md-2 control-label" })
                        <div class="col-md-10">
                            @Html.TextBoxFor(m => m.Panel, new { @class = "form-control" })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(m => m.SelectedAnnotationType, new {@class = "col-md-2 control-label"})
                        <div class="col-md-10">
                            @Html.DropDownListFor(m => m.SelectedAnnotationType, Model.AvailableAnnotationTypes, new {@class = "form-control"})
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(m => m.Annotation, new {@class = "col-md-2 control-label"})
                        <div class="col-md-10">
                            @Html.TextAreaFor(m => m.Annotation, new {@class = "form-control"})
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-md-offset-2 col-md-10">
                            <input type="submit" value="Create annotation" class="btn btn-default" />
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

@section scripts{
    @Scripts.Render("~/bundles/qbuilder")
    <script type="text/javascript" src="@Url.Content("~/Scripts/jQueryBuilder/annotation-builder.js")"></script>
}